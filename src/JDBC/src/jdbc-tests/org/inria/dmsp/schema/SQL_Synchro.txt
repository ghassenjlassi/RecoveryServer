#JAVA package org.inria.dmsp.schema;
# //////////////////////////////////////////////////
# // CODE AFTER THAT IS GENERATED BY QEPGenerator //
# //////////////////////////////////////////////////

# This is the set of SQL queries used to generate EP_Synchro.java
# Note that :
#   - EP generation fails (bug...) when altogether, must be generated by query type 
#   - EP generation for queries marked by x is buggy and must be corrected by hand

# NB: to be able to quickly build the java file, a header is placed at the 
# beginning of the file and should be removed from the output.
# --> Replace "//JAVA " by "" in the output.

# Bugs:
# buggy plans are tagged with "TODO" 
# --> those plans must be corrected manually

#JAVA public class EP_Synchro {
   #  PLANS:
   #    EP_INFO_SELECT_BY_ID
   #    EP_USER_SELECT_BY_ID
   #    EP_EPISODE_SELECT_BY_ID
   #    EP_FORMULAIRE_SELECT_BY_ID
   #    EP_ROLE_SELECT_BY_ID
   #    EP_EVENT_SELECT_BY_ID
   #    EP_COMMENT_SELECT_BY_ID
   #    EP_HABILITATION_SELECT_BY_ID
   #    EP_PATIENT_SELECT_BY_ID
   #    EP_COMMENT_SELECT_BY_ID
   #    EP_INFO_SELECT_ON_TSSPT
   #    EP_COMMENT_SELECT_ON_TSSPT
   #    EP_INFO_UPDATE
   #    EP_COMMENT_UPDATE
   #    EP_EPISODE_UPDATE
   #    EP_EPISODE_INSERT
   #    EP_FORMULAIRE_INSERT
   #    EP_USER_INSERT
   #    EP_PATIENT_SELECT_ON_TSSPT
   #    EP_EPISODE_SELECT_ON_TSSPT
   #    EP_HABILITATION_SELECT_ON_TSSPT
   #    EP_EVENT_INSERT
   #    EP_INFO_INSERT
   #    EP_COMMENT_INSERT
   #    EP_ROLE_INSERT
   #    EP_HABILITATION_INSERT
   #    EP_HABILITATION_DELETE
   #    EP_INFO_DELETE
   #    EP_COMMENT_DELETE
   #    EP_PATIENT_INSERT_AUTRE_USER
   #    EP_PATIENT_INSERT_AUTRE_ROLE
   #    EP_PATIENT_INSERT_USER_USER
   #    EP_PATIENT_INSERT_USER_ROLE
   #    EP_PATIENT_INSERT_FORMULAIRE_USER
   #    EP_PATIENT_INSERT_FORMULAIRE_ROLE
   #    EP_PATIENT_INSERT_EPISODE_USER
   #    EP_PATIENT_INSERT_EPISODE_ROLE
   #    EP_ROLE_SELECT_ON_TSSPT


#JAVA public static String EP_INFO_SELECT_BY_ID =
VERBOSE SELECT * FROM Info WHERE IdGlobal = ?;

#JAVA public static String EP_USER_SELECT_BY_ID =
VERBOSE SELECT * FROM UserDMSP WHERE IdGlobal = ?;

#JAVA public static String EP_EPISODE_SELECT_BY_ID  =
VERBOSE SELECT * FROM Episode WHERE IdGlobal = ?;

#JAVA public static String EP_FORMULAIRE_SELECT_BY_ID =
VERBOSE SELECT * FROM Formulaire WHERE IdGlobal = ?;

#JAVA public static String EP_ROLE_SELECT_BY_ID =
VERBOSE SELECT * FROM Role WHERE IdGlobal = ?;

#JAVA public static String EP_EVENT_SELECT_BY_ID =
VERBOSE SELECT * FROM Event WHERE IdGlobal = ?;

#JAVA public static String EP_HABILITATION_SELECT_BY_ID =
VERBOSE SELECT * FROM Habilitation WHERE IdGlobal = ?;

#JAVA public static String EP_PATIENT_SELECT_BY_ID =
VERBOSE SELECT * FROM MatricePatient WHERE IdGlobal = ?;

#JAVA public static String EP_COMMENT_SELECT_BY_ID =
VERBOSE SELECT * FROM Comment WHERE IdGlobal = ?;

#JAVA public static final String EP_INFO_SELECT_ON_TSSPT =
VERBOSE SELECT i.IdGlobal, i.Author, i.TSSPT, i.TSSanteos, i.IdEvent, i.IdComment, i.ValChar, i.ValNum, i.ValDate, i.Position, i.Filtre, i.IdConcept FROM info i, event e WHERE i.IdEvent=e.IdGlobal AND e.TSSPT > 0 AND i.TSSPT > ?

#JAVA public static final String EP_COMMENT_SELECT_ON_TSSPT =
VERBOSE SELECT c.IdGlobal, c.Author, c.TSSPT, c.TSSanteos, c.ValComment FROM Comment c, Info i, Event e WHERE i.IdEvent=e.IdGlobal AND i.IdComment=c.IdGlobal AND e.TSSPT > 0 AND c.TSSPT > ?

#JAVA public static String EP_EVENT_UPDATE =
VERBOSE NO_CI UPDATE Event SET Author = ?, TSSPT = ?, TSSANTEOS = ? ,  DateEvent = ?, DateFin = ?, Filtre = ? WHERE IdGlobal = ?;

#JAVA public static String EP_INFO_UPDATE =
VERBOSE NO_CI UPDATE Info SET Author = ?, TSSPT = ?, TSSanteos = ?, ValChar = ?, ValNum = ?, ValDate = ?, Position = ?, Filtre = ?, IdConcept = ? WHERE IdGlobal = ?;

#JAVA public static String EP_COMMENT_UPDATE =
VERBOSE NO_CI UPDATE Comment SET Author = ?, TSSPT = ?, TSSanteos = ?, ValComment = ? WHERE IdGlobal = ?;

#JAVA public static String EP_USER_UPDATE =
VERBOSE NO_CI UPDATE UserDMSP SET Author = ?, TSSPT = ?, TSSanteos = ?, Nom = ?, Type = ?, Responsable = ?, Identifiant = ?, Civilite = ?, Prenom = ?, Adresse = ?, Ville = ?, CodePost = ?, Tel = ?, Mobile = ?, Courriel = ?, InfoLegale = ?, Certificate = ?, IdRole = ? WHERE IdGlobal = ?

#JAVA public static String EP_EPISODE_UPDATE =
VERBOSE NO_CI UPDATE Episode SET Author = ?, TSSPT = ?, TSSanteos = ?, Nom = ? WHERE IdGlobal = ?;

#JAVA public static final String EP_FORMULAIRE_UPDATE =
VERBOSE NO_CI UPDATE Formulaire SET Author = ?, TSSPT = ?, TSSanteos = ?, Nom = ?, Filtre = ? WHERE IdGlobal = ?

#JAVA public static final String EP_ROLE_UPDATE =
VERBOSE NO_CI UPDATE Role SET Author = ?, TSSPT = ?, TSSanteos = ?, Nom = ? WHERE IdGlobal = ?

#JAVA public static final String EP_EPISODE_INSERT =
VERBOSE INSERT INTO Episode (IdGlobal, Author, TSSPT, TSSanteos, Nom) VALUES (?, ?, ?, ?, ?);

#JAVA public static final String EP_FORMULAIRE_INSERT =
VERBOSE INSERT INTO Formulaire (IdGlobal, Author, TSSPT, TSSanteos, Nom, Filtre) VALUES (?, ?, ?, ?, ?, ?);

#JAVA public static final String EP_USER_INSERT =
VERBOSE INSERT INTO UserDMSP (IdGlobal, Author, TSSPT, TSSanteos, Nom, Type, Responsable, Identifiant, Civilite, Prenom, Adresse, Ville, CodePost, Tel, Mobile, Courriel, InfoLegale, Certificate, IdRole) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);

#JAVA public static String EP_PATIENT_SELECT_ON_TSSPT =
VERBOSE SELECT * FROM MatricePatient WHERE TSSPT > ?;

#JAVA public static String EP_EPISODE_SELECT_ON_TSSPT =
VERBOSE SELECT * FROM Episode WHERE TSSPT > ?;

#JAVA public static String EP_HABILITATION_SELECT_ON_TSSPT =
VERBOSE SELECT * FROM Habilitation WHERE TSSPT > ?;

#JAVA public static final String EP_EVENT_INSERT =
VERBOSE INSERT INTO Event (IdGlobal, Author, TSSPT, TSSanteos, IdForm, IdUser, IdEpisode, DateEvent, DateFin, Filtre) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);

#JAVA public static final String EP_INFO_INSERT =
VERBOSE INSERT INTO Info (IdGlobal, Author, TSSPT, TSSanteos, IdEvent, IdComment, ValChar, ValNum, ValDate, Position, Filtre, IdConcept) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);

#JAVA public static final String EP_COMMENT_INSERT =
VERBOSE INSERT INTO Comment (IdGlobal, Author, TSSPT, TSSanteos, ValComment) VALUES (?, ?, ?, ?, ?);

#JAVA public static final String EP_EVENT_SELECT_ON_TSSPT =
VERBOSE Select * from event where TSSPT > ?

#JAVA public static final String EP_USER_SELECT_ON_TSSPT =
VERBOSE Select * from userdmsp where TSSPT > ?

#JAVA public static final String EP_ROLE_INSERT =
VERBOSE INSERT INTO Role (IdGlobal, Author, TSSPT, TSSanteos, Nom) VALUES (?, ?, ?, ?, ?);

#JAVA public static final String EP_HABILITATION_INSERT =
VERBOSE INSERT INTO Habilitation (IdGlobal, Author, TSSPT, TSSanteos, IdRole, IdUser) VALUES (?, ?, ?, ?, ?, ?);

#JAVA public static final String EP_FORMULAIRE_SELECT_ON_TSSPT =
VERBOSE Select * from formulaire where TSSPT > ?

#JAVA public static final String EP_HABILITATION_DELETE =
VERBOSE NO_CI DELETE FROM Habilitation WHERE IdGlobal = ?;

#JAVA public static final String EP_INFO_DELETE =
VERBOSE NO_CI DELETE FROM Info WHERE IdGlobal = ?;

#JAVA public static final String EP_COMMENT_DELETE =
VERBOSE NO_CI DELETE FROM Comment WHERE IdGlobal = ?;

#JAVA public static final String EP_DELETED_SELECT_ON_TSSPT =
VERBOSE NO_CI SELECT * from TupleDeleted where TSSPT > ?

#manually created
#there are multiple insert EPs, selection is done in tupleInsert below
#JAVA //---- Multiple INSERTS ----
#CATEGORIE AUTRE:

#JAVA public static String EP_PATIENT_INSERT_AUTRE_USER	=  // NEWSCHEMA OK // COMMENT OK // CHECK OK // TEST OK
#JAVA   //Insert into matricepatient values (?,?,?,?,?,?,?,?,?)
#JAVA   "/*EP \u0009 5 0 0 1 9 10 1 71 ?1 72 ?2 73 ?3 74 ?4 75 ?5 76 ?6 77 ?7 78 ?8 79 ?9 # " +
#JAVA   // TABLE_INSERT, 9 colums, Table MPAT(10), a table (1), --> R0 - R8
#JAVA   "5 1 1 10 2 4 0 5 v10 52 r11 # " +  // TABLE_INSERT, 2 colums, Table SKT_MPAT(4), a SKT (0) --> R9
#JAVA   "4 10 10 11 10 0 r6 r10 # " +   	// SELECT, Att IdGlobal(10), equal (0), value r6 (IdCat), From Pos r10
#JAVA   "1 11 11 12 r11 1 2 1 10 # " +  	// TABLE_LOOKUP, Pos R11, 1 col, Table USERDMSP(2), a TABLE(1) --> R10
#JAVA   "0 12 12 2 # \u0000*/"; 					// SCAN, Table USERDMSP(2) -->R11

#JAVA public static String EP_PATIENT_INSERT_AUTRE_ROLE	= // NEWSCHEMA OK // COMMENT OK // CHECK OK // TEST OK
#JAVA   //Insert into matricepatient values (?,?,?,?,?,?,?,?,?)
#JAVA   "/*EP \u0009 5 0 0 1 9 10 1 71 ?1 72 ?2 73 ?3 74 ?4 75 ?5 76 ?6 77 ?7 78 ?8 79 ?9 # " +
#JAVA   // TABLE_INSERT, 9 colums, Table MPAT(9), a table (1), --> R0 - R8
#JAVA   "5 1 1 10 2 4 0 5 v10 52 r11 # " +  // TABLE_INSERT, 2 colums, Table SKT_MPAT(4), a SKT (0) --> R9
#JAVA   "4 10 10 11 52 0 r6 r10 # " +   	// SELECT, Att IdGlobal(52), equal (0), value r6 (IdCat), From Pos r10
#JAVA   "1 11 11 12 r11 1 6 1 52 # " +  	// TABLE_LOOKUP, Pos R11, 1 col, Table ROLE(6), a TABLE(1) --> R10
#JAVA   "0 12 12 6 # \u0000*/"; 					// SCAN, Table ROLE(6) -->R11

#CATEGORIE USER:
#JAVA public static String EP_PATIENT_INSERT_USER_USER	= // NEWSCHEMA OK // COMMENT OK // CHECK OK // TEST OK
#JAVA   //Insert into matricepatient values (?,?,?,?,?,?,?,?,?)
#JAVA   "/*EP \u0009 5 0 0 1 9 10 1 71 ?1 72 ?2 73 ?3 74 ?4 75 ?5 76 ?6 77 ?7 78 ?8 79 ?9 # " +
#JAVA   // TABLE_INSERT, 9 colums, Table MPAT(9), a table (1), --> R0 - R8
#JAVA   "5 1 1 2 2 4 0 5 r10 52 r12 # " +   // TABLE_INSERT, 2 colums, Table SKT_MPAT(4), a SKT (0)
#JAVA   "7 2 2 10 4 # " +   					// FLOW
#JAVA   "4 4 4 5 10 0 r4 r9 # " +   		// SELECT, Att IdGlobal(10), equal (0), value r4 (IdCat), From Pos r9
#JAVA   "1 5 5 6 r10 1 2 1 10 # " +  		// TABLE_LOOKUP, Pos R10, 1 col, Table USERDMSP(2), a TABLE(1) --> R9
#JAVA   "0 6 6 2 # " +  						// SCAN, Table USERDMSP(2) -->R10
#JAVA   "4 10 10 11 10 0 r6 r11 # " +  		// SELECT, Att IdGlobal(10), equal (0), value r6 (IdActeur), From Pos r11
#JAVA   "1 11 11 12 r12 1 2 1 10 # " +  	// TABLE_LOOKUP, Pos R12, 1 col, Table USER(2), a TABLE(1) --> R11
#JAVA   "0 12 12 2 # \u0000*/";					// SCAN, Table USER(2) -->R12

#JAVA public static String EP_PATIENT_INSERT_USER_ROLE	= // NEWSCHEMA OK // COMMENT OK // CHECK OK // TEST OK
#JAVA   //Insert into matricepatient values (?,?,?,?,?,?,?,?,?)
#JAVA   "/*EP \u0009 5 0 0 1 9 10 1 71 ?1 72 ?2 73 ?3 74 ?4 75 ?5 76 ?6 77 ?7 78 ?8 79 ?9 # " +
#JAVA   // TABLE_INSERT, 9 colums, Table MPAT(9), a table (1), --> R0 - R8
#JAVA   "5 1 1 2 2 4 0 5 r10 52 r12 # " +   // TABLE_INSERT, 2 colums, Table SKT_MPAT(4), a SKT (0)
#JAVA   "7 2 2 10 4 # " +   				// FLOW
#JAVA   "4 4 4 5 10 0 r4 r9 # " +   		// SELECT, Att IdGlobal(10), equal (0), value r4 (IdCat), From Pos r9
#JAVA   "1 5 5 6 r10 1 2 1 10 # " +  		// TABLE_LOOKUP, Pos R10, 1 col, Table USERDMSP(2), a TABLE(1) --> R9
#JAVA   "0 6 6 2 #" +  						// SCAN, Table USERDMSP(2) -->R10
#JAVA   "4 10 10 11 52 0 r6 r11 # " +  		// SELECT, Att IdGlobal(10), equal (0), value r6 (IdActeur), From Pos r11
#JAVA   "1 11 11 12 r12 1 6 1 52 # " + 		// TABLE_LOOKUP, Pos R12, 1 col, Table ROLE(6), a TABLE(1) --> R11
#JAVA   "0 12 12 6 # \u0000*/";					// SCAN, Table ROLE(6) -->R12

#CATEGORIE FORMULAIRE:
#JAVA public static String EP_PATIENT_INSERT_FORMULAIRE_USER	= // NEWSCHEMA OK // COMMENT OK // CHECK OK // TEST OK
#JAVA   //Insert into matricepatient values (?,?,?,?,?,?,?,?,?)
#JAVA   "/*EP \u0009 5 0 0 1 9 10 1 71 ?1 72 ?2 73 ?3 74 ?4 75 ?5 76 ?6 77 ?7 78 ?8 79 ?9 # " +
#JAVA   // TABLE_INSERT, 9 colums, Table MPAT(9), a table (1), --> R0 - R8
#JAVA   "5 1 1 2 2 4 0 5 r10 52 r12 # " +   // TABLE_INSERT, 2 colums, Table SKT_MPAT(4), a SKT (0)
#JAVA   "7 2 2 10 4 # " +  					// FLOW
#JAVA   "4 4 4 5 5 0 r4 r9 # " +  			// SELECT, Att IdGlobal(5), equal (0), value r4 (IdCat), From Pos r9
#JAVA   "1 5 5 6 r10 1 1 1 5 # " + 			// TABLE_LOOKUP, Pos R10, 1 col, Table FORM(1), a TABLE(1) --> R9
#JAVA   "0 6 6 1 # " + 						// SCAN, Table FORM(1) -->R10
#JAVA   "4 10 10 11 10 0 r6 r11 # " + 		// SELECT, Att IdGlobal(10), equal (0), value r6 (IdActeur), From Pos r11
#JAVA   "1 11 11 12 r12 1 2 1 10 # " + 		// TABLE_LOOKUP, Pos R12, 1 col, Table USER(2), a TABLE(1) --> R11
#JAVA   "0 12 12 2 # \u0000*/";					// SCAN, Table USER(2) -->R12

#JAVA public static String EP_PATIENT_INSERT_FORMULAIRE_ROLE	= // NEWSCHEMA OK // COMMENT OK // CHECK OK // TEST OK
#JAVA   //Insert into matricepatient values (?,?,?,?,?,?,?,?,?)
#JAVA   "/*EP \u0009 5 0 0 1 9 10 1 71 ?1 72 ?2 73 ?3 74 ?4 75 ?5 76 ?6 77 ?7 78 ?8 79 ?9 # " +
#JAVA   // TABLE_INSERT, 9 colums, Table MPAT(9), a table (1), --> R0 - R8
#JAVA   "5 1 1 2 2 4 0 5 r10 52 r12 # " + 	// TABLE_INSERT, 2 colums, Table SKT_MPAT(4), a SKT (0)
#JAVA   "7 2 2 10 4 # " + 					// FLOW
#JAVA   "4 4 4 5 5 0 r4 r9 # " + 			// SELECT, Att IdGlobal(5), equal (0), value r4 (IdCat_Epi), From Pos r9
#JAVA   "1 5 5 6 r10 1 1 1 5 # " + 			// TABLE_LOOKUP, Pos R10, 1 col, Table FORM(1), a TABLE(1) --> R9
#JAVA   "0 6 6 1 # " + 						// SCAN, Table FORM(1) -->R10
#JAVA   "4 10 10 11 52 0 r6 r11 # " + 		// SELECT, Att IdGlobal(52), equal (0), value r6 (IdActeur), From Pos r11
#JAVA   "1 11 11 12 r12 1 6 1 52 # " + 		// TABLE_LOOKUP, Pos R12, 1 col, Table ROLE(6), a TABLE(1) --> R11
#JAVA   "0 12 12 6 # \u0000*/";					// SCAN, Table ROLE(6) -->R12

#CATEGORIE EPISODE:
#JAVA public static String EP_PATIENT_INSERT_EPISODE_USER	=  // NEWSCHEMA OK // COMMENT OK // CHECK OK // TEST OK
#JAVA   //Insert into matricepatient values (?,?,?,?,?,?,?,?,?)
#JAVA   "/*EP \u0009 5 0 0 1 9 10 1 71 ?1 72 ?2 73 ?3 74 ?4 75 ?5 76 ?6 77 ?7 78 ?8 79 ?9 # " +
#JAVA   // TABLE_INSERT, 9 colums, Table MPAT(9), a table (1), --> R0 - R8
#JAVA   "5 1 1 2 2 4 0 5 r10 52 r12 # " + 	// TABLE_INSERT, 2 colums, Table SKT_MPAT(4), a SKT (0)
#JAVA   "7 2 2 10 4 # " + 					// FLOW
#JAVA   "4 4 4 5 0 0 r4 r9 # " + 			// SELECT, Att IdGlobal(5), equal (0), value r4 (IdCat_Epi), From Pos r9
#JAVA   "1 5 5 6 r10 1 0 1 0 # " + 			// TABLE_LOOKUP, Pos R10, 1 col, Table EPI(0), a TABLE(1) --> R9
#JAVA   "0 6 6 0 # " + 						// SCAN, Table EPI(0) -->R10
#JAVA   "4 10 10 11 10 0 r6 r11 # " + 		// SELECT, Att IdGlobal(10), equal (0), value r6 (IdActeur), From Pos r11
#JAVA   "1 11 11 12 r12 1 2 1 10 # " + 		// TABLE_LOOKUP, Pos R12, 1 col, Table USER(2), a TABLE(1) --> R11
#JAVA   "0 12 12 2 # \u0000*/";					// SCAN, Table USER(2) -->R12

#JAVA public static String EP_PATIENT_INSERT_EPISODE_ROLE	= // NEWSCHEMA OK // COMMENT OK // CHECK OK // TEST OK
#JAVA   //Insert into matricepatient values (?,?,?,?,?,?,?,?,?)
#JAVA   "/*EP \u0009 5 0 0 1 9 10 1 71 ?1 72 ?2 73 ?3 74 ?4 75 ?5 76 ?6 77 ?7 78 ?8 79 ?9 # " +
#JAVA   // TABLE_INSERT, 9 colums, Table MPAT(9), a table (1), --> R0 - R8
#JAVA   "5 1 1 2 2 4 0 5 r10 52 r12 # " + 	// TABLE_INSERT, 2 colums, Table SKT_MPAT(4), a SKT (0)
#JAVA   "7 2 2 10 4 # " + 					// FLOW
#JAVA   "4 4 4 5 0 0 r4 r9 # " + 			// SELECT, Att IdGlobal(5), equal (0), value r4 (IdCat_Epi), From Pos r9
#JAVA   "1 5 5 6 r10 1 0 1 0 # " + 			// TABLE_LOOKUP, Pos R10, 1 col, Table EPI(0), a TABLE(1) --> R9
#JAVA   "0 6 6 0 # " + 						// SCAN, Table EPI(0) -->R10
#JAVA   "4 10 10 11 52 0 r6 r11 # " + 		// SELECT, Att IdGlobal(52), equal (0), value r6 (IdActeur), From Pos r11
#JAVA   "1 11 11 12 r12 1 6 1 52 # " + 		// TABLE_LOOKUP, Pos R12, 1 col, Table ROLE(6), a TABLE(1) --> R11
#JAVA   "0 12 12 6 # \u0000*/";					// SCAN, Table ROLE(6) -->R12

#JAVA //---- end of INSERTS ----

#JAVA public static final String EP_ROLE_SELECT_ON_TSSPT =
VERBOSE SELECT * FROM role WHERE TSSPT > ?

#JAVA }
